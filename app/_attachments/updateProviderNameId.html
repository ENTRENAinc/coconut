<!DOCTYPE HTML>
<html>
<head>
    <title> Update Provider Name and Id</title>

    <style>
        body {
            font: 100% helvetica, arial, sans-serif;
            line-height: 1.625;
        }

    </style>

    <script type="text/javascript" src="js-libraries/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js-libraries/jquery.couch.js"></script>




    <script language="JavaScript">
       // var uuids2Modify = new Array("0SZ1B9WNZ","82WSK4STU","6AD5CDMMQ","A5JA1WBRU","ZYF4Q122A","3XGA2R6V4","ZFDNQFQ5P","ZFDNQFQ5P"); // CAMINANTE
       // var uuids2Modify = new Array("0Q6QWND9S"); // ACCION CALLEJERA
       // var uuids2Modify = new Array("FNS4RDSCS","YKKNSQ027","7R7QFXQGA","7KWKAM5R1","GDD3A9P9D","AYTHJGXFW","GJ5626KDT","2K19AE27Z","869GAG280","YJ6YEM076","ZZ44DN038","WFH861T24","7ZA49CPV9","NG1BEFGG0","M7J99YD8G","J9CM44PX9","GFA7QCGM4","8QFBACEES","HVETZRTF~","YEC05DGMC","NMA9EYBD0","TXQCKK0D4","W74WBVBZ1","1SHD2K84Z","MHZKHE898","6BWP6R2RG","B3BB16KS3","M42M3S1KK","EZEY924TZ"); // CASA ABIERTA
       // var uuids2Modify = new Array("WQJQBTJ2J","JX4Q1N7CV"); // CEFASA
       // var uuids2Modify = new Array("ASC2MXMQZ","3ATBD5CY1","2YFWGX74V","30FBBN2MW","30FBBN2MW","8G6WVH78Q","9YF8SB0SG","T8HT81ENG","05FKZ9RG3","F1EM0905Q","8EJK9P8FV","B148K5E3Q","P51PW23DR","TZDV029SJ"); // IDDI PUERTO PLATA
       // var uuids2Modify = new Array("3V1THDVXZ","4V8NR1G6V","FPB22TS5M","V1X54PQ0M","KR3ZCVE0U","NHDT87PG8","JR7BM1186","VHDDC1H6M","83JVKG8Y6","2DNHMWY5Z","0TQS4RH0*","0TQS4RH0*","PPPFG1F8$","WASC4XXA0","E22DNWAX*","069Q4ZBJP","GG51JPKQS","VBG2NNPVN","G9YJSB3C2","KWF2XFY25","7RWTTBBT*","7RWTTBBT*","59AG8SYWJ","7A626TF94","A9EFQHB8A","T493H2DZ3","V4ZZ6WYAC","WE0D65QTZ","RNPBR976J","FAF40YPVE","G3P3X8HPF","G4QZGGN3J","C4HSFHQXC","38ZP334VE","ZB5Y6J499","RG25J6BT3","QHWT93CEN","WBX3W2Q8*","A6BPME9SZ","650E869GB","SZ6PKA7J1","XT7ZJ318D","BX0Y8YZ7A","0V3NS5DN4","EHGQGVCQP","CPAEVPSPH","JBW5ZBKMZ","K6755BCNA","4YKNH7VP8","FF84S42PQ","3GY50CQ32","F2KZ55NMF","4F81Q5TRM","YPHHPZA0N","RBYYG2JN0","Z8NBKJ7DZ","FMJPFB569","NGDNZBJ2Q","67ANF8VS2","YWZHHAPDD","AFD0ZE5WG","X57BPNB9P","K58FN0R0W","5YAKENW1U","HCYGB70M~","CKB0NVSF3","28QHEGV3=","E8J45Y8KS","YPYS1QF9Z","AMH5M0AZR","QH646Q7JJ","NG4M6M548","G1PQRB5A*","PM0Z2BVRN","RVGDKBP1~","KXQ4ZA61Q","CFV7SZCDS","E6RXD4VHF","V32X5YVX8","7KE4VVBHE","V9BZM9N3~","7H0XYNSSR","RMBMYS78*","JKTVRNGNM","ZEG3JANWA","WZJDX785V","1WBX956KC","1WWX8NWS~","YCRY9B62U","1VHZ66PRZ","AZJK1N54A","MBAJSD2PR","R1YVEE6CP","7F26DEWVU","TYG6QVFZQ","F15HP3JQW","1Z6MSNNG5","STF71DN3N","R0336SCC=","W74P4480D","037579HR$","BHD3Y4AZ9","RD2TYY3KJ","XSJCMQKKS","N8SPYNN7J","EBR3Q0TVQ","W3JRHAZS8","5E1BT9E7Q","SEE6DZ777","Z9Q6MNR0W","5VFSCRT9F","ZSZJDXW57","347E56A92","7VT4GC2VW","VHEJEATM1","CJDAYZ7PT","5NB9E2T1D","3XYJ8KNBT","WCZ4170B$","6SAB076B=","9VRW4N09K","W7MD07YF=","6YVKQMN9W","3XC81CB9A","HY6Y8J8NA","4M8TKS1JN","0RNZPNRKA","KS3YWXJZU","Y2C1QFA5P","VE42J790S","55GX8QK7T","0F9Q5B4B5","ENSHD4AT9","9CED622MT","W2KSHAKGV","7N27MFSJZ","8MV13SRAC","WYQXQVDBS","H86HCWJ2K","A3843JJAZ","EJP2XY4YZ","KJ1W251NS","XY1XG5CC9","JK96XCMYD","Q340N7FE0","GZMY8N5T7","XVW8N2P6Z","NFRJ7ARNT","MQRT7NGXG","J5NCD3S5R"); // PROFAMILIA  SANTO DOMINGO
       // var uuids2Modify = new Array("25ATYS426","DXRS5HF27","HAD17DCPV","6NJDD05AC","V5WFSQN37","2SCYPZJEA","HKV0SSH48","J47XK4SCM","H6V19M32W","QQJQSMC2E","144H0GYXN","09WPXEHRA","64GMEE4N=","K1HBVM0P=","ZDTV4BYQF","98PH0VMWD","HF8PT4K6P","230ZB5PWN","49SP6DW1Q","9V8YW6GMN","C6Y8K5570","P5M5Q0KSH","FZPA7RY4D","ZV2TD6XK=","4SSDR97WF","XJJ8SFP6U","DZK2KR37W","M53W53Z8K","BF7NFSNZZ","FHVCPP2Y5","SS3WPCY0P","D9CXJMDYH","ZZKC67TDF","D4EYBTGV6","D36TNDPNG","XDJ4VXSSV","FKT1ANHT4","FS0K2Z1X$","QEWHZ1911","YQR6NTC1P","CNYZMW3PY","51SEAQWXQ","28R5JEK85","JFAHRJVVG","BMNMNSZH0","WCRD8YSW5","H2EP141M9","DA253Z5W3","V6VAQZNWC","ZTM3RJM7T","FK17WCD62","BBJ5GNPHV","4JA4ZBPCG","PHP2ADJ3S","7F9PNF39N","GCFST9CHA","8R3K9EAZD","59C0KTPW~","ZT3RACHVG","RSCF5SHX4","FJDSBT548","5HGV7G09W","BCVJ4WBJA","YAGGY03D~","MTY1Y0J8M","9GPXEQQY3","VSB0XCMK7","1QBDB81ZZ","QA34AYKQK","Y3K67MG7Y","91D0EFV8D","8AJXQYM5S","91GVJCX89","CMB80DQSM","27668226$","FZW4C7H0K","0JXCDRWT=","A28R244QJ","JHCMXEY02","26A9TGH2U","A6W62K5JB","KZ0F0ZD9Z","8VBM23R0=","N8QR8NBE2","1QQX6VPK6","KB37RABVY","ZEHJ12QJS","PFCPN4WME","EJA2DXC0Z","X11ZTMJXF","Q7T5MZ4FR","P6HCZ4NZ=","N2VMWB587","R5PSWY89Z","HYJ5ZF4C1","BXN2ZPDE6","8GD2ZYK4W","WFD1VTQEE","TZC41FNXC","BZP5WAM7*","4NCZJ3B5B","7GKDY3DMS","819Z56B6W","GZ6XQJKP1","5343N73M8","ZWGF2YVMS","F0GXGYK72","FS2XWBY83","451K4JR8R","YC6MAT57D","AZ3N59CNZ","R3RGW7RY6","B88TDP8W6","K1KRKAQ29","VT0HYB02~","XG8E068ZA","GF88BTG1F","KD78K4YYY","VZJ46WY76","56HV8D6S9","0JVBG09S6","M7FXS7A5E","XPZ9BE9R=","MH4C5J70K","DKZ759H9H","T8RYHCF15","E8MGZYAPG","D1AEYD7Z7","HS6K30GBD","WYAVGT57Y","GJ6JAJJG9","435Z2KEN2","X9ZJ750GM","988HCT0T8","CT8DREPAJ","YNGYBK62U","G7J77VHK3","5HQ3P4KT9","9K469VX5Z","C88AT59Z=","NFMGC1XK2","GH5RBYRJV","ZZ9C6KAB8","HTSH7XDKZ","9Y3JMNRN6","K88S3K09T","DJT7XJJJN","DE85BQ37Z","92YSV3YCY","H3RRR1KTV","N9RM06E3K","22P4S72VY","NFEQK2VTM","MYWYQ9S36","4KGPBW0MA","05GW81XME","5DPPEDMVH","WH5GDACG2","9BG9YNGMZ","CZM5AYVXA","0C9TBS9TZ","1G8PSVWAJ","276ZRFSVF","0YCHWNW0E","1KAYNGFSZ","2DPE6DEMG","1PH8ZRB0E","D1EFSMZMC","6TS3P5152","1A2QDG8GC","P810B375A","5G616QF1V","W4B9EH81S","BB5KDR0B6","7E2N9TYPA","92EAQRQW*","Z4XZYQSVU","GN81W2KB6","NGGK3BMWJ","07RNSFQAQ","A02VCP2DT","J5VQJF4K5","S7K534HZW","6GCECC5M9","DM2Y76CHT","WS6A7D4Q7","7QJFFC8C8","FK03CENW*","1WVCDJEZC","4AX1DYDZ1","81TJTKRW1","C42AGQYH9","MAM68Q5EQ","SNE51JDX$","G0CA4V342","3RZ26ZGH7","XREJBZS68","GNPRZW4K$","AWR48WB9R","5557Q6G5C","87CTBB6Y5","BRCSMPSH=","P69JZ5NF8","G1YGQTE32","76BZ2FZT*","2BEDR80E6","6WM8VW832","2BEDR80E6","0BYEZX0XQ","5JA2BEVMB","G21S8T62G","9YFVVGNW9","72SC22DQ*","N9BYESYC1","H5G5RECNR","BD2YFMH3U","HA031JT4W","2351CYJSJ","TGKVXZWB=","0KEG4ZC4F","6SWJ1WQEK","VN6SSAD7E","B1YJF04HH","VRG239QDQ","56SBPF60S","Z9AYXF9B0","EESVEWMRK","GK9B58P14","9FVSM1HKB","6C6BQZG91","1PVF5JWZD","QZ3KK7VF~","FAM6RKWC5","2ABT7QSWF","0WB32HQ5T","TD9YBJV18","Z4V1BMSK3","5H392N12Q","YMHZM2GNE","G0FDEFMBD","Y9S29PYE6","79Q0MJ3D9","ZVZ4HKT28","RF6F88XGB","SR9GV5V9*","K7QN9TWZ8","B10M8TGPW","C2WXZ9YNQ","D556DZ5XD","P5XD4K6N5","GMVSP3TJV","R6M8WF0N6","JV4CT6Y0B","ETJ3BT9R6","1D6FEGB89","SQYX6WZT$","2NERB85ZR","FGY3WJVHV","FMK4R5V05","V1PBGN1NG","GE0NF7FTZ","PSGJ7D5HD","YQD17BXEF","6YWFEEAP$","8RPTB6EET","2PCEDMFBF","4NMFQ2XY1","SR7C0ZP8R","0TF0YHFSQ","G8NZMTNKA","4HYYAGNP*","TJTXSR3FE","XKJ07QPBJ","91S91092$","KTWGJWA6Y","Y26ZKRHTC","N5YE74J4T","RHV3BB7FE","M4RNSFC3B","CWN795D9M","Z50FW9TYN","VZAC110R5","81B7MWBKU","CBWD2HGJ8","ZVDFYJEKZ","YYT892KTP","GFS45S1P8","STZPAS4M2","S12MH9N3=","0YEFE23AZ","KPNZ8KF47","C0ZAKEZEB","5NC29PF8V","E6M238E42","SM3BQBVW2","59ASVW4Z=","PYHXH4DYP","DSJWPEHTD","DK44CW4JE","TCYCG7ASZ","9EK4MFJ2Y","KJRKF3R5A","SB9RD1HC6","2DDHAKRZV","F6ED7XPF1","Z03X9QBCE","P9FF8689R","3KYNT9T83","RH92AGX6B","4TNHRV17K","5YGGHV43W","Q2SAG188P","JK71ZYWN~","AV629X4A4","5W3VYBF9~","QM5SYHKAP","T6W9RSK0M","0QM1WT315","B9FCNDCAQ","NMWF5BMRV","GQQ1ESMER","Z51T79G8Q","P7Z3PKJNH","7Y29ZH96C","WM13FFK9S","TFVKJW5ND","CMXDDSNG=","EVT3145J3","92S0GQ2EC","5MKTGJGZW","XTBG848DZ","H3GYK3DCG","NARZTHPXZ","GSGM9Q60H","PYGRFQQ67","ET30TCVBH","K2QKNQ8VU","3KF1QN5JJ","5BCX7WE9Y","N1P6Y3QC8","EPH9PYNWY","M3YG9R3BD","VHPPV6ANJ","2EJSGFG9E","58M94KHXP","Y1YFTK7W4","V6ATS4Z1C","88X3BSMSM","FNCXE1X7=","DQN9904QN","72MP7EEZE","TZPFDZ7XT","Q5ST2QQSD","9T53XAWPC","73M7GZSAC","FVCTQSX5Y","ZDMJE5N1$","CNS80ECYT","T8BWVXTF$","X8MDZ218E","9TJP0G28H","7HVSTK7WD","48Z7ZDPE~","CXJSX462Z","555608WJ8","F8Q2D9591","C74SYBZ7Z","KY74BHJ0$","C2JMV4MZ=","9KBD4R4FE","0ZWKPKF6=","9KBD4R4FE","9KBD4R4FE","QER51XPD0","J0ZPS2RV0","RE26NZ1F7","TKH7288PP","RT1GARKVH","SWZTZQ5EQ","89YDN2WCM","6VA36W4BP","Y1Q7JS335","5GKETYQT4","D6YGZ7HJ5","JSYBP40EH","EYPHQX982","SA369DFDJ","7D7A4GZDQ","73ST5B3ET","49P4SC2M4","FBF47GD79","ZZ83Q3X6T","R5CVBCWK2","C3BBXQ41*","G8R4MC3AM","JY4D1KVQD","DRT8S9CQQ","RV1ADWZC=","A231WWZ9Q","BDKKF87S7","Y1BKJ5240","HTMAN8RX7","PGETTP5FN","8XECJ3BJ8","3HH607B2G","1YSR0S1Z=","4CG9MFZF3","Y3W2P6GYP","3NHH6BNT6"); // UCNE
       var uuids2Modify = new Array("0SZ1B9WNZ","82WSK4STU","6AD5CDMMQ","A5JA1WBRU","ZYF4Q122A","3XGA2R6V4","ZFDNQFQ5P","ZFDNQFQ5P"); // CAMINANTE


        // TBD: need to dynamicaly fetch this from mySQL database
        var providers =[];

        providers['38'] = 'Accion Callejera';
        providers['24'] = 'ACOPRO';
        providers['25'] = 'ADOM';
        providers['26'] = 'Alianza para el Servicio Comunitario';
        providers['23'] = 'Caminante';
        providers['22'] = 'Caritas';
        providers['18'] = 'Casa Abierta';
        providers['19'] = 'CEDUCA';
        providers['20'] = 'CEFASA';
        providers['21'] = 'CEPROSH';
        providers['27'] = 'Children International (Boca Chica)';
        providers['28'] = 'Children International (Santo Domingo/Santo Domingo Este)';
        providers['35'] = 'COIN (Puerto Plata)';
        providers['36'] = 'COIN (Santo Domingo/Santo Domingo Oeste)';
        providers['37'] = 'COIN (Villa Altagracia)';
        providers['34'] = 'Entrena';
        providers['33'] = 'EPCA';
        providers['29'] = 'FEI';
        providers['30'] = 'Fundacion Arcoiris';
        providers['31'] = 'Fundacion Casa de la Mujer Villaltagraciana';
        providers['32'] = 'Fundacion Pedro Martinez y Hermanos';
        providers['17'] = 'Grupo Clara';
        providers['16'] = 'IDAC';
        providers['7'] = 'IDCP (Santo Domingo/Santo Domingo Oeste)';
        providers['8'] = 'IDCP (Villa Altagracia)';
        providers['9'] = 'IDDI (Bonao)';
        providers['10'] = 'IDDI (Puerto Plata)';
        providers['6'] = 'IDDI (Santo Domingo/Distrito Nacional)';
        providers['5'] = 'IDDI (Santo Domingo/Santo Domingo Norte)';
        providers['2'] = 'MOSTCHA';
        providers['1'] = 'Profamilia (Duarte/San Francisco de Macoris)';
        providers['3'] = 'Profamilia (Santiago)';
        providers['4'] = 'Profamilia (Santo Domingo/Santo Domingo Norte)';
        providers['11'] = 'Project Hope';
        providers['12'] = 'RTI DR';
        providers['13'] = 'Sociedad del Nino Jesus';
        providers['14'] = 'Sur Futuro';
        providers['15'] = 'UCNE';

        function startUpdate(){
            var db = $.couch.db("coconut");
            db.view("coconut/byUndefinedProviderNameId",
                    {
                        success:function(data){

                            for (i in data.rows) {
                                doc = data.rows[i];
                                // check if this uuid is in the uuid to modify array
                                if($.inArray(doc.key, uuids2Modify) > -1){

                                    //fetch the document
                                    db.openDoc(doc.id, {
                                        success: function(data){

                                            html = '<tr>' + '<td>' + data._id + '</td>' +
                                                '<td>' + data.provider_id + '</td>' +
                                                '<td>' + data.provider_name + '</td>' +
                                                '<td>' + data.Provincia + '</td>' +
                                                '</tr>';
                                         $("#listtbl").append(html);

                                            // update the provider name
                                            data.provider_name = "UCNE";
                                            data.provider_id = "15";
                                            // save the document
                                            db.saveDoc(data);

                                            }
                                    });
                                }

                            }
                        },
                        error:function(data){
                            alert("Someting wrong");
                        }
                    });
        }


    </script>

</head>


<body >
<p>This will fetch documents where provider name is "undefined" by using a view and will update these documents with the correct provider name.</p>
<input type="button" onclick="startUpdate()" id="start" value="Start">

<p> Updating the documents.... </p>
<table id="listtbl" ></table>



</body>

</html>
