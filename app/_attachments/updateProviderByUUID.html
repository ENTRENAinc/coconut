<!DOCTYPE HTML>
<html>
<head>
    <title> Update Provider Name and Id</title>

    <style>
        body {
            font: 100% helvetica, arial, sans-serif;
            line-height: 1.625;
        }

    </style>

    <script type="text/javascript" src="js-libraries/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js-libraries/jquery.couch.js"></script>
    <script type="text/javascript" src="js-libraries/moment.min.js"></script>




    <script language="JavaScript">


        var uuids2Modify = new Array("00TX9MXPT","032T687X5","035NV5M2Z","03FANPH5S","03K6QCRG4","03THPWPQD","06274PXN4","07CAA6TS$","0945BRHSV","0CBC8A80*","0CHH7ZET1","0FCKA2PQ4","0JJFCYN2F","0KXBBNAWN","0PR2J9RDS","0SAEXKC9Y","0TRD5B4DR","0VM876ADE","0W1S1GQXA","0WYMGXBDZ","0YGB0F15K","10NHKFHF3","114GEHHFM","14A1P6G6V","1667GVB3N","176JMZT6$","17N7TV83P","17RB891X3","17Y0C4EZ$","191K099ZE","19S97GQZQ","1BQR8R527","1CHYRNXY1","1E07WVPYF","1FBNY9RX$","1FWYX9E7A","1GP10SJYC","1HB2JC2M*","1KZJAGGJC","1M9NNQFZH","1MNY4CY04","1QGFR4KQ2","1R16GWJA9","1WR0QZRSJ","1YR78V2XE","20M1AJQ99","21HA562Q=","22EDDPBQ*","27JVGBNS5","2A2E2KX7$","2AFRBX5MY","2B6JSDGSG","2BZPFYTWK","2C85ZMC6T","2CV301A9G","2E7XTGTZ5","2EAW3EAN4","2ENZXHP6~","2GZ2H4C32","2JMA1NECD","2KMJQYEMW","2ME4FPZHN","2S4KGAW2M","2W07AZXYR","2Y96DAYFD","2YJT2TTEM","3139298VH","32C3YNHHB","36PNDGWNQ","36WGWTKV*","38GR3HHTV","38VXXZJRN","3CYH4KQG5","3FR25V7KS","3GP86T0B$","3JTZBH1KB","3M80X9T2H","3P5G6Q9KQ","3QSVXSS6S","3QWF10QW6","3QY9BGYCM","3RNKK3NGF","3TEA8QK7~","3VWYBG801","3XADW57SS","3Y4M5QFRV","3Y5KEEGEJ","3YDAZ911R","3YNY4MW5$","3ZR79ND66","429P5PRA5","42QF1TBKS","43BX1S2SS","43N773VQ~","467MRVCYY","47CSM57ND","47K05H93*","48RVSFCM3","4CH30QHF5","4NQY9AVAH","4PV1NMP2V","4QBF988V*","4QSY6DSES","4SGV798R8","4V36GG0JB","4WFG0PQ9W","4WH5QW57W","4YTQ9M84S","4YX709EAD","4YZ9R6RYB","4ZZ62VKFT","50CWB1Q1H","55JWC5ZH*","55MN2QY0C","5A18FCFJ4","5DVTJZJ85","5JBD8VRDZ","5KP45TM0R","5M9HW2KH7","5MG02YPWH","5NF9QJH48","5PE8BSRHW","5QCX45CQQ","5RCAC2Y3=","5SSVGNS3G","5W633634G","5W9SH50ZZ","5ZT88KB8K","60170PCHN","60G27QR06","64GEA18EP","65HTFFHTY","67QM5R23N","6APW477EN","6ATFMZHTA","6C8NAEZXU","6CMS3ZZV4","6CTEAMK4H","6F5NT7Q6$","6HPN4SW4H","6J1NS7VET","6MC9D4GW$","6N45GD01T","6NK725EWC","6SD0SS3D$","6X8BFKDS$","6Z36BJCTD","6ZG365AN=","70RHZE8M$","71EBAX08B","727XB04FM","72RBJEYN5","73MBTEFF4","76KSXNVD*","776362PAU","78YMFA40N","7A4FEK4GM","7BG3X00T$","7DA60EWZV","7E3QGKS7J","7F3A56PF7","7GRTYSPMQ","7HA80N73K","7HZ6SFCKC","7KKEZF1S=","7MY3FPMZW","7RSBETN0J","7T3SNMMVZ","7VYG0C41T","7X6FS8X72","7Z0A5504C","80RM008ME","817Y0GPF7","820ETF00J","84H3S5X9F","85QSCT6K2","86QHC7Y0Q","89XY3G3W9","8A64YF3NZ","8AX7XPCKZ","8BBX0N4E8","8BFCCA2ZU","8DJ0NS65U","8E025WQDC","8EGFJSDF1","8FCB1Y4BK","8FFC0VZ3K","8FGZYHT3N","8FY0BQXFR","8RZGR57E0","8SGJZW495","8SSBEH6Z3","8SYW8M5ZE","90161FC5Z","913D48BXC","923A1ZARQ","93BN4Z5PM","93N3SGVGS","94EPT83CJ","97CNR87Q$","98KF04E3M","99ZEN6682","9CYE3M818","9EMVGBE6C","9FMEK7C7J","9GXQG1PJT","9KE0SC420","9SHE9ZG59","9W1BKGW38","9W8ZBWHX6","9YDQ56S2$","9Z18WFS1T","A0NTAGTNW","A3KWMSJW$","A5XH787V0","A6K5QD7XN","A8SJED4MN","AC3N3RFVZ","AE2PX5PX8","AFA7Y0VHT","AGDTKF4BY","AHCP8NQ4H","AJCWH3QH~","AN7TFNCKW","APXE1QM3E","AQHFQJBBY","AQVZ2M80~","ARX1JJ2EB","ATMBN5TW6","AW9HRY2R2","AWNZDKZQY","AXQ43ZKPP","AYER17YT1","B2GGJEJQ0","B2P07F564","B31QBH58H","B4WYZ30XY","B7A5918ZQ","B859JNM4M","BB1HJ3GM8","BF8WD2FQG","BKAP46W58","BNJBD0NM8","BNTNWX3TU","BQS1G4ZY6","BS5RMM2YS","BSMXWG8ZV","BT31PCJ4D","BT3WZBNWP","BTPR854G$","BZ6ZG3AFZ","BZD0YDS97","C140JG0TC","C1ZQKAXV4","C4TTD5GD9","C8MJ174Z2","CAVTKQSQK","CAWQEVA8P","CBPA490KC","CDJFZ81K7","CDS0S299H","CFQJSTT7~","CJXZB2NY0","CK85J799M","CMYZE7DM7","CPE97EG75","CQXE0VX2M","CRH7XFVQ*","CRZHZ2TW3","CVN21CVS3","CWYHBNV09","CYXVRNWNV","D04DAJEPK","D1C0MZWTW","D1Q8VWQW~","D2GESF9FA","D6EPWS894","D88HES9MH","D9CNRVHAT","DCN66ECBY","DESHCZGRF","DFPHPT71K","DFSAEQQD2","DFZ1ZYTF8","DGNS1NS4Q","DKYFQJ8N*","DTB5VZMF9","DTM1HHBPA","DV4YHC8HS","DWN9QRDX$","DYRGPEH1T","E02AY6ZM9","E4E5HQH7F","E85NTSHMB","E8E2SR71W","E9P8ZTY9$","EFKW9QY87","EHNKCVQBG","EJ3BNYV5Z","EJ86BAHT8","EKQYE8QQR","EM0XYEPZU","EMC1W16D5","ENPG3X4YC","EPGCTJNYE","EPJGQN3MD","ES3CYTH61","ES87TSTXK","EVEEVVYNY","EVVSSTG46","EW6C4BZKT","EZF9FT8R0","F03AHMVK7","F0KBZ12T6","F0Q2RNRTJ","F0S0SJGPD","F1BRQQW8Q","F1QVBMHYE","F1Y5ZHGR$","F3V52J9F9","F5W1ESN54","F85WMDA4V","F991W5YFA","F9S72P1KQ","FAWNQCVV1","FC6H1F356","FFMQXHSYG","FFSBD8BAW","FPH34P77T","FQ96JSNSS","FTE7VVW5Q","FXW1F6JCQ","FY7DQE31E","G9S93CMRD","GEGK8X1Z9","GHPAVX17K","GMES3BXY8","GN0CZ1AXM","GS72ZPGY0","GZ97T3K5B","H22FGAQN=","H40MCMST2","H715X3YPF","H7JXJXYMS","H9EG7QD2G","HBWKWRKEK","HG20BFJMR","HMS0BN2VS","HQ40JAQYE","HTM23F0GJ","HWZ21CDFU","HX479BK19","HXAY7AMWS","HY5ABZ0GJ","HZFXTVNXA","HZKQKBGZR","J3P78NEM3","J5S4JKBK*","J5ZMJE46P","J7R22Z935","J805VATY$","JAT1ASD7T","JBFVXYF10","JBR4GYXX5","JBS88GMY2","JENX9WRWR","JHDAZA5C$","JJ8MR5JN7","JJFX6M5KR","JPYDYREJ2","JTBRKX1EU","JVDKSXV0V","JVV28BHJ9","K0SQWXGRA","K0Y8RJMAW","K1GPCPKWZ","K1T7CWRZC","K3QFV2APZ","K4Z657WHN","K6QRMRBQ6","K8GQE6FVW","KCCZ85GP9","KGR7ZBDC0","KJ3J1QQF9","KK9JR25QM","KKEJFQZWH","KPQJS6K5=","KPZRTDHCG","KTKCBZH53","KTSXJEA17","KVADTCQRP","M0K97HXF~","M38Q0CVN1","M3HFCGD5E","M412V1RKK","M5ZN2HRRE","M648ZMH4=","M8V9BXTMV","M9N55YS7=","M9QP60ZXC","MCAM175SG","MDZJ9YNKJ","ME8F9B4YG","MEKGNXZX8","MJNHWGSWV","MKCDHYTJY","MKRK53FYW","MNHSK6CAK","MQS9S1730","MQXWX7KEC","MSKR8KVK2","MT3NW7DVH","MTCGJH97F","MWE3G4H29","MXD00FC0G","MYZ92VBWV","N0XXT3GP=","N1YR1N7S9","N7D4S2GDM","NA6V5XVSY","NC592WA73","NCMVRRX4N","NFX24V484","NGER2RPKK","NH0EDGRCB","NHGJJ2DRU","NJ595FMDW","NND8VHCHB","NPHKG3R7E","NQ1HXXBP2","NR5KZQ3FE","NXJTQK6YH","P1C37XTPZ","P1WB0PZ08","P2T6NXF1=","P2Y5PA088","P3ZBDVSZM","P4FHPMFGD","P64VCMVWF","P91X8WT5~","PC4B50TBV","PCSSB60E=","PCVSNRSP9","PDDCB0674","PEGE165H2","PFRA4E5JF","PG3YV15MW","PPXRM00P=","PQDGTF7A2","PQK0K8ANZ","PRJFJ4P2K","PRZCF2YN3","PXF9VVDBQ","PZ142NM5J","PZAR0YX2V","PZR0ABCF$","Q0ZEH8JB~","Q1G1QPGZJ","Q1RFSY7N~","Q1V5AM1WK","Q23WVR14U","Q29D8KAZ6","Q3CKMSXE$","Q3YBR4WP6","Q53CHNDXF","QB2ZXBMFU","QCHHZ5WD=","QFNT70KEU","QNK01RAZR","QS9QSV311","QW00QTQSN","QZXMW7JS$","R11JZ826Z","R29MCB3TY","R2W3BXNCR","R7FMPNXFT","R7VSMMHGE","RBRY7FTSU","RCDYG9MHH","RFACYXC6S","RFKSAABHB","RFXRR0HDZ","RH9BZZPW2","RM6Z2NG7Q","RN2RAYY9V","RPGJMXTKP","RPS6ACTE$","RPT7E4QEZ","RRQPJHH62","RZPYVYCM6","S1ERCN4Z2","S3JMP85D2","S6P3T9PP2","S8S6RJBZK","S9PMWZ9CT","SA38J7PQ5","SATT8RDDZ","SCQ5B5YJ=","SDWAY32EM","SNC2NY7XK","SNFFWPPJD","SQY0A7ZN8","SSW5GH384","SVNCQ522E","SX7Q95X2*","SYG76396D","SZ95PCRSP","T6GST00VU","T84J3FFHE","T8M9C75HM","T9G3Z9VQS","T9XADBEKW","TA68AHCE6","TC48H9XDB","TEXQSQ3V4","TJYJ108ZD","TK7ZPXSKZ","TNXGPYWF4","TQESN075B","TSJRDZGRG","TSTVPXSSJ","TTH8Q937N","TTR5NEC1G","TTW9JE742","TV0PXH6M9","TVNDG2HV2","TW6EA7J30","TW9JSGJG=","TWZNRBJ9C","TXG77GAK7","TXGG3YBYD","V13TR6J3P","V1G31VF2E","V3RAWSW06","V3T8SW29E","V3XA0QJCZ","V65KHMW2R","V704HJ5N5","V8M9TQWMM","VHMVY9J37","VHXFTCZ79","VJV2BSJ40","VMH4H9H0$","VNJYA9NAC","VR1KJAKZT","VVAD533F1","VW6FBHV8T","VY4JT3A60","VYB8QEC99","VYXN86944","VZB7480EM","VZPXWV65Y","W0M5ZXCSN","W2A1NV5ZV","W54NMHJY2","W620TAC2P","W66R2C167","W6XHTG0RQ","WA82EJ3GD","WBH26MWGK","WJ1Y0S22T","WJ5E683VE","WK3JG1CYK","WN9E8TB9A","WNE2ADQD8","WPNNM5D46","WQ3TVX29E","WQCVXA77Y","WQMMHQV9N","WQS2DJ6FD","WR27TRE3F","WT67Q01KA","WWCR91VJT","X0C27Q7X~","X0VW2DNB=","X196HWNZ~","X33SXATCB","X4G7VBQCF","X4SAQKP0S","X5SEKV11C","X6NH54C7N","X7TANW6Y$","X9A8MM6Y2","XB4HAK0D~","XB6Z9HJ7~","XF23E4E0Q","XFKFQANV=","XFKJ55ZGF","XFX07FDB2","XHG0EBDNM","XMCFN4F6P","XS0WEEYM=","XS7562V88","XT17MA7XG","XT3H0TVP$","XX98C0HN9","XXA686XW5","XZMHQBNPN","Y0CE7J2N7","Y0K37AWN9","Y0ZQ1ZR66","Y6D8Z86T$","Y7T3MWMFA","Y8BK3H6BK","Y8K263KNP","YBBNS6042","YBEDRGSDM","YGQ1PBGH~","YHMH6Y2AG","YKQ1JHG1$","YMCGX72G1","YN1MZ73ZH","YN7BB19D~","YNDYPE4TV","YNQJRB7WB","YP8J3T547","YS68P4S6E","YWX3HS2Y3","YZA2ET5Q1","YZX5DS8YH","Z1K6TPSR5","Z2P1X2C57","Z4DBJ260S","Z5F0494R7","ZBTS1XFB1","ZDE0QV6NR","ZDKZVW1FS","ZDTGYS7B0","ZEW29V73U","ZF91GZRRG","ZGFXQY0MW","ZH3402MB4","ZHS3A8H7S","ZN9EXFWHD","ZP3Z0RV8K","ZQN3DRWJZ","ZRRKNMQEY","ZSPPNR0SY","ZSS245CYT","ZT8PK26XV","ZTKQ2DTPM");



        function startUpdate(){
            var db = $.couch.db("coconut");
            db.view("coconut/byUUID",
                    {
                        success:function(data){

                            for (i in data.rows) {
                                doc = data.rows[i];
                                // check if this uuid is in the uuid to modify array
                                if($.inArray(doc.key, uuids2Modify) > -1){

                                    //fetch the document
                                    db.openDoc(doc.id, {
                                        success: function(data){

                                            html = '<tr>' + '<td>' + data._id + '</td>' +
                                                    '<td>' + data.provider_id + '</td>' +
                                                    '<td>' + data.provider_name + '</td>' +
                                                    '<td>' + data.uuid + '</td>' +
                                                    '</tr>';
                                            $("#listtbl").append(html);

                                            // update the provider name
                                            data.provider_name = "IDDI (Bonao)";
                                            data.provider_id = "9";
                                            data.lastModifiedAt = moment(new Date()).format(undefined);
                                            // save the document
                                            db.saveDoc(data);

                                        }
                                    });
                                }

                            }
                        },
                        error:function(data){
                            alert("Someting wrong");
                        }
                    });
        }





    </script>

</head>


<body >
<p>This will fetch documents where provider name is "undefined" by using a view and will update these documents with the correct provider name.</p>
<input type="button" onclick="startUpdate()" id="start" value="Start">

<p> Updating the documents.... </p>
<table id="listtbl" ></table>



</body>

</html>
